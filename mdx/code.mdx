---
id: "code"
title: "Show code"
accentColor: "yellow"
category: "BROWSER_AUTOMATION"
stack: "nodejs"
description: "Control Steel's managed browser infrastructure with Puppeteer in Node.js for reliable web automation without the headaches."
---

<Guide>
  <Step number={1} title="Code">
    ```typescript showLineNumbers filename="index.ts" {11-14} /connect/1#1 /evaluate/#2
    import puppeteer from "puppeteer-core";
    import Steel from "steel-sdk";

    async function main(session: any) {
      const browser = await puppeteer.connect({
        browserWSEndpoint: `wss://connect.steel.dev?apiKey=...&sessionId=${session.id}`,
      });

      const page = await browser.newPage();
    
      const stories = await page.evaluate(() => {
        // This script runs in the browser context
        return Array.from(document.querySelectorAll('tr.athing')).map(row => row.textContent);
      });

      console.log(stories);
      await browser.close();
    }
    ```
    This code shows how to <HighlightRef id={1}>connect</HighlightRef> to the session and then <HighlightRef id={2}>evaluate</HighlightRef> a script on the page to scrape content.
  </Step>
</Guide>